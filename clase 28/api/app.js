import express from 'express';
import mongoose from 'mongoose';
import { userRoutes, projectroutes, taskroutes } from './routes/index.js';
import 'dotenv/config';
import cors from "cors"

mongoose.connect("mongodb://127.0.0.1:27017/proyecto251v", {
    useNewUrlParser: true,
    useUnifiedTopology: true,
  })
    .then(() => {console.log('Conectado a MongoDB...')
})
    .catch(err => console.log('No se pudo conectar con MongoDB..', err));


const app = express();

app.use(cors()) //allow all origins

// const corsOptions = {
//     origin: 'http://example.com',
//     methods: ['GET', 'POST'],
//     allowedHeaders: ['Content-Type', 'Authorization'],
//     credentials: true 
// }

app.use(express.json());
app.use(express.urlencoded({extended:true}));
app.get('/',(req, res) => {
    res.send("proyecto 25.1 v");
});

app.use('/users', userRoutes);
app.use('/projects', projectroutes);
app.use('/tasks', taskroutes);

const port = process.env.PORT || 3002;
app.listen(port, () => {
    console.log(`    ░▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▒
    ░▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▀▌▀▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▓  ░   ▀▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓███████▓▓▓▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓██████████▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▀▓█▓▀▀▓▌▐▀▒▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▄███▄▓▌  ▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌█████▀  ▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌█████▀░▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▀▀▀▀▀░  ▀▀▀   ░▀▀▀▀▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▀        ░               ▀▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌ ░                         ▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▒▒░░                  ▒░      ▐▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▒░▒▒░            ░    ░░▓██▄     ▀▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▀░▄▓▓██░ ░         ░░ ░▄▐▄▒▌▀█▓░     ▀▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▄▒▒▒█▓▓░           ░  ░▒▒▓███▓▓█▓▄    ▀▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌███▀▀▌▀              ░░░▒▓███▌▌▓███▄  ▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▓█▌▒▌ ░▌      ░    ░░ ░ ░▒▒▓▓▌▌▌▌▌▓██▄▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▓▒█▌▌░ ░ ░░░░   ░   ▐ ░░▒░▓▒▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▓░░▌▌▌░ ░░░░ ░░░ ░ ░ ░░  ░▒▄▌▌▀▀▀▀▀▀▀▀▌▌▌▌▒▌▀▒▒▌▌▌▐▀▒▐▒▌▒░ ▒▌▌▌▌░ ▒▌▌▌▌▌▌
    ░▓▌▌▌▌▓░▓▓▌▌▌▓▄▄▄▄▒░░░░░░░   ░ ░▌▌▌▌▒        ▐▌▌▒▒  ▒▌▌▓▐  ░▐▌    ▐▌▌▌   ▓▌▌▌▌▌
    ░▓▌▌▌▌▓▓▓█▀▓▌▀▓██████▓▓▄▌▄▄▄▄▓▒▌▌▌▌▌▒   ▌▄▄   ▐▌▒▒  ▒▌▌▌▒  ░▐▌    ░▀▌▓   ▐▌▌▌▌▌
    ░▓▌▌▌▌▌█▓▌▌▌▌▒▒▒░░▐▀▀▓██████▀▀░ ▐▌▌▌▒   ▌▌▌    ▌▌░  ▐▌▌▓▒   ▐▌░    ▒▓▓   ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▒▌███▓▄▄▄▒▐▄▄▒░░░    ▐▌▌▌   ▌▌▓   ▐▌▌   ▐▌▌▌▒   ▓▌      ▐▌░  ▀▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▀▒▀▒░░░▒▀▄░▄▓░ ░▀░░░▐▌▌▌         ▓▌▌   ▐▌▌▌░   ▓▌   ▐   ▀▒  ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▄░░░      ░▓█▄░░░░░▐▌▌▌▌   ▄    ▌▌▌▌   ▐▌▌▌▒   ▐▌   ▐▌      ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▒░░░       ▓█▀▐░░░▌▌▌▌▌  ░▌▌   ▀▌▌▒   ▐▌▌▓░   ▐▌   ▐▌▒     ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▒░░░░     ▐█░░░ ▓▌▌▌▌▒  ░▌▓░  ▐▌▌▌   ▐▌▌▓░  ░▓▌░  ▐▌▌▒    ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▓▒▒░░░     ▓█░░▐▌▌▌▌▌▒   ▌▌▌   ▐▌▌░  ░     ░▐▌▌   ▐▌▌▌▒   ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▌░░░    ▐█▓░▓▌▌▌▌▌▒   ▌▌▓   ▒▓▌▓▄▌░ ░▒▒▒▓▌▌▌░░▒▐▌▌▌▌▌▒▒▓▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▓▒░░░   ▀▒▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▀▒▀▀▀▀▀░   ▒▌▌▌▌▌▌▌▀▀▀▀▓▌▀▀▀▀▌▌▌▌▌▌▌▌▌▌▌▌▌▀▀▀▓▌▌▀▀▀▌▌▌▌▌▓▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▓██▓▌▀▓█▓▄     ▌▌▌▌▌▌▌ ▐▄▄▌  ▄  ▀    ▐▌    ▐▒ ▄▄▄▌ ▄▄ ▐▄▄  ▄▄▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▓█████▄█▀▓█▓░░▓▐▌▌▌▌▌▌▌ ▐▀▓▌ ▐▌▒ ▐ ▐▌  ▌ ▐▌  ▒ ▀▌▌▌ ░▓▌▌▌▌ ▐▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▒█████▒██▀▀▀▒▓▌▌▌▌▌▌▌▒ ▐▄▐▌ ▐▌▒ ▐    ▐▌    ▓▒ ▄▄▓▌▌░ ░▓▌▌ ▐▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌░▀██▀▒▓▒▓▒▐░▓░▓▌▌▌▌▌▌▒ ▓▌▌▌ ▐▌░ ▐ ▐▌ ▐▌ ▐░ ▓▒ ▓▌▌▀▒▌▓  ▌▌ ▐▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌░ ░ ▐▒░░▒▄▄█▒▌▓▌▌▌▌▌▌▒ ▐▌▌▓▒░  ▒▓ ▐▌  ▌ ▐▌ ▐▒   ░▌░░ ░▄▌▌░▐▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌░░░ ▐▌░░▄▌▀█▓▐▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌░  ▐▓▐███▓▓█▌▒▌▌▌▌▌▌▌▓▀▓▓▓▀▓▌▌▌▌▌▒▌▀▐▌▌▌▌▐▀▀▌▒▌▌▒▀▀▌▌▌▌▀▀▀▓▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▓▌▒▀▌▀█▓▒▓▒▐▌▌▌▌▌▌▒        ▐▌▌▒▒  ▒▌▌▓▒  ░▐▌    ▐▌▌▌   ▓▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▌▀▀▀▓▌▄▐▌▌▌▌▌▌▒   ▄▄▄   ▐▌▒▒  ▒▌▌▓▒  ░▐▌    ▐▓▌▓░  ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▒▓▄░░░░▒▒▌▌▌▌▌▌▌   ▌▌▌    ▌▌░  ▐▌▌▓▒  ▐▐▌     ▒▓▓   ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▀▓▒░░░░░▐▌▌▌▌▌▌   ▌▌▌   ▐▌▌   ▐▌▌▌▒   ▓▌░     ▐▓░  ▓▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▄▒░░░░▄▄▌▌▌▌▌▌   ░░    ▓▌▌   ▐▌▌▌▒   ▓▌   ▌   ▀▒  ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓██▀▓█▓▌▌▌▌▌▌▌        ▓▌▌▌   ▐▌▌▌▒   ▐▌   ▓▌      ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▀    ▀▌▌▌▌▌▌▌  ░▌▌   ▓▌▌▒   ▐▌▌▓░   ▐▌   ▐▌▒     ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌      ▀▌▌▌▌▌▒  ░▌▓░  ▐▌▌▌   ▐▌▌▌░   ▓▌░  ▓▌▌░    ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌       ░▓▌▌▌▒   ▌▌▌   ▀▌▌░   ░     ▒▌▌   ▐▌▌▌▒   ▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▄▄▀████▓▌▌▌▌▒   ▌▌▓   ▒▓▌▓▄▒░ ░▄▒▒▄▓▌▌░ ░▐▌▌▌▌▄░▒▐▌▌▌▌▌
    ░▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▓▌▌▌▌▌▌▌▌▌▓▌▓▌▌▌▌▓▓▓▓▌▌▌▌▌▌▓▓▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
    ░▀▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▓▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌▌
                                                                                ░`);
console.log(`

  ██████╗ ██╗   ██╗███╗   ██╗     █████╗ ██████╗ ██╗    ██████╗ ██╗   ██╗███╗   ██╗██╗
  ██╔══██╗██║   ██║████╗  ██║    ██╔══██╗██╔══██╗██║    ██╔══██╗██║   ██║████╗  ██║██║
  ██████╔╝██║   ██║██╔██╗ ██║    ███████║██████╔╝██║    ██████╔╝██║   ██║██╔██╗ ██║██║
  ██╔══██╗██║   ██║██║╚██╗██║    ██╔══██║██╔═══╝ ██║    ██╔══██╗██║   ██║██║╚██╗██║╚═╝
  ██║  ██║╚██████╔╝██║ ╚████║    ██║  ██║██║     ██║    ██║  ██║╚██████╔╝██║ ╚████║██╗
  ╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═══╝    ╚═╝  ╚═╝╚═╝     ╚═╝    ╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝
                                                              
        `);
})